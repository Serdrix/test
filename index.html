<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Hazy's Market — Demo (Reliable Collapsible)</title>
<style>
:root{--bg:#0a0a0a;--panel:#101010;--muted:#a7a7a7;--fg:#f4f4f4;--line:#222;--radius:14px}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:inherit;text-decoration:none}
header.hero{padding:20px 16px;border-bottom:1px solid var(--line);position:sticky;top:0;background:rgba(10,10,10,.9);backdrop-filter:blur(6px);z-index:50}
.hero-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px}
.brand{font-weight:800;font-size:1.5rem;letter-spacing:.03em}
.search{margin-left:auto}
.search input{background:#0f0f0f;border:1px solid #2a2a2a;border-radius:10px;padding:10px 12px;color:#f1f1f1;min-width:220px}
.container{max-width:1200px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:240px 1fr;gap:16px}
@media(max-width:900px){.container{grid-template-columns:1fr} .sidebar{order:2} .grid{order:1}}
.sidebar{position:sticky;top:84px;align-self:start;background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);padding:12px}
.sidebar h3{margin:0 0 8px;font-size:.95rem;color:#ddd}
.cat{display:flex;flex-direction:column;gap:6px}
.cat a,.cat .summary{padding:10px 12px;border-radius:10px;border:1px solid transparent;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
.cat a.active,.cat a:hover,.cat .summary:hover{background:#121212;border-color:#2a2a2a}
/* Custom collapsible */
.collapsible .summary{user-select:none}
.collapsible .summary .arrow{transition:transform .25s ease}
.collapsible.open .summary .arrow{transform:rotate(180deg)} /* up when open */
.collapsible .content{max-height:0;overflow:hidden;opacity:0;transition:max-height .3s ease, opacity .3s ease}
.collapsible.open .content{max-height:1000px;opacity:1} /* large enough for list */
/* Grid & cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.card img{width:100%;height:180px;object-fit:cover;display:block}
.card .meta{padding:12px;border-top:1px solid #1a1a1a}
.meta .title{font-weight:600}
.meta .sub{color:var(--muted);font-size:.9rem;margin-top:4px}
.callout{margin:10px 0 18px;background:#0e0e0e;border:1px dashed #2c2c2c;border-radius:12px;padding:12px;color:#cfcfcf}
footer{padding:24px 16px;border-top:1px solid var(--line);color:#c1c1c1;text-align:center;margin-top:30px}
.contactbar{position:fixed;right:16px;bottom:16px;background:#141414;border:1px solid #2b2b2b;border-radius:12px;padding:10px 12px;display:flex;gap:10px;align-items:center;box-shadow:0 8px 30px rgba(0,0,0,.45)}
.contactbar a{padding:8px 10px;border-radius:8px;background:#0d0d0d;border:1px solid #2b2b2b}
.lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:60}
.lightbox img{max-width:92vw;max-height:88vh;border-radius:12px;border:1px solid #333}
.lightbox.show{display:flex}
</style>
</head>
<body>
<header class="hero">
  <div class="hero-inner">
    <div class="brand">HAZY'S MARKET</div>
    <div class="search"><input id="q" placeholder="Search (client-side)"/></div>
  </div>
</header>

<div class="container">
  <aside class="sidebar">
    <h3>Categories</h3>
    <nav class="cat" id="catnav">
      <!-- Static top-level categories -->
      <a href="#" data-id="carts">Carts</a>
      <a href="#" data-id="disposables">Disposables</a>
      <a href="#" data-id="concentrates">Concentrates</a>
      <a href="#" data-id="edibles">Edibles</a>
      <a href="#" data-id="pre-rolls">Pre-Rolls</a>

      <!-- Collapsible Flower group -->
      <div class="collapsible" id="flowerCollapsible">
        <div class="summary" role="button" tabindex="0" aria-expanded="false" aria-controls="flowerContent">
          <span>Flower</span>
          <span class="arrow">▼</span>
        </div>
        <div class="content" id="flowerContent">
          <a href="#" data-id="name-brand-flower">Name Brand Flower</a>
          <a href="#" data-id="ultra-tier">Ultra Tier</a>
          <a href="#" data-id="diamond-tier">Diamond Tier</a>
          <a href="#" data-id="exotic-tier">Exotic Tier</a>
          <a href="#" data-id="gold-tier">Gold Tier</a>
          <a href="#" data-id="silver-tier">Silver Tier</a>
          <a href="#" data-id="bronze-tier">Bronze Tier</a>
        </div>
      </div>

      <a href="#" data-id="snowcaps-moonrocks">Snowcaps & Moonrocks</a>
      <a href="#" data-id="raw-shrooms">Raw Shrooms</a>
      <a href="#" data-id="shroom-edibles">Shroom Edibles</a>
    </nav>
    <div class="callout">No checkout. Message admin to order.</div>
  </aside>

  <main>
    <div id="grid" class="grid"></div>
  </main>
</div>

<div class="lightbox" id="lightbox" onclick="this.classList.remove('show')">
  <img id="lbimg" alt="Preview"/>
</div>

<div class="contactbar">
  <span>Contact:</span>
  <a href="#" title="Signal">Signal</a>
  <a href="#" title="Snapchat">Snapchat</a>
</div>

<footer>Demo using custom collapsible (reliable animation). Replace placeholder images in assets/img/.</footer>

<script>
const data = [
  {id:"carts",name:"Carts",items:[{title:"Carts",subtitle:"Tap to zoom",image:"assets/img/carts.jpg"}]},
  {id:"disposables",name:"Disposables",items:[{title:"Disposables",subtitle:"Tap to zoom",image:"assets/img/disposables.jpg"}]},
  {id:"concentrates",name:"Concentrates",items:[{title:"Concentrates",subtitle:"Tap to zoom",image:"assets/img/concentrates.jpg"}]},
  {id:"edibles",name:"Edibles",items:[{title:"Edibles",subtitle:"Tap to zoom",image:"assets/img/edibles.jpg"}]},
  {id:"pre-rolls",name:"Pre-Rolls",items:[{title:"Pre-Rolls",subtitle:"Tap to zoom",image:"assets/img/pre-rolls.jpg"}]},
  {id:"name-brand-flower",name:"Name Brand Flower",items:[{title:"Name Brand Flower",subtitle:"Tap to zoom",image:"assets/img/name-brand-flower.jpg"}]},
  {id:"ultra-tier",name:"Ultra Tier",items:[{title:"Ultra Tier",subtitle:"Tap to zoom",image:"assets/img/ultra-tier.jpg"}]},
  {id:"diamond-tier",name:"Diamond Tier",items:[{title:"Diamond Tier",subtitle:"Tap to zoom",image:"assets/img/diamond-tier.jpg"}]},
  {id:"exotic-tier",name:"Exotic Tier",items:[{title:"Exotic Tier",subtitle:"Tap to zoom",image:"assets/img/exotic-tier.jpg"}]},
  {id:"gold-tier",name:"Gold Tier",items:[{title:"Gold Tier",subtitle:"Tap to zoom",image:"assets/img/gold-tier.jpg"}]},
  {id:"silver-tier",name:"Silver Tier",items:[{title:"Silver Tier",subtitle:"Tap to zoom",image:"assets/img/silver-tier.jpg"}]},
  {id:"bronze-tier",name:"Bronze Tier",items:[{title:"Bronze Tier",subtitle:"Tap to zoom",image:"assets/img/bronze-tier.jpg"}]},
  {id:"snowcaps-moonrocks",name:"Snowcaps & Moonrocks",items:[{title:"Snowcaps & Moonrocks",subtitle:"Tap to zoom",image:"assets/img/snowcaps-moonrocks.jpg"}]},
  {id:"raw-shrooms",name:"Raw Shrooms",items:[{title:"Raw Shrooms",subtitle:"Tap to zoom",image:"assets/img/raw-shrooms.jpg"}]},
  {id:"shroom-edibles",name:"Shroom Edibles",items:[{title:"Shroom Edibles",subtitle:"Tap to zoom",image:"assets/img/shroom-edibles.jpg"}]}
];

const grid = document.getElementById('grid');
function showCat(id){
  document.querySelectorAll('.cat a').forEach(a=>a.classList.toggle('active', a.dataset.id===id));
  grid.innerHTML='';
  const cat=data.find(x=>x.id===id);
  if(!cat) return;
  cat.items.forEach(it=>{
    const card=document.createElement('article');
    card.className='card';
    card.innerHTML=`<img src="${it.image}" alt="${it.title}" loading="lazy">
      <div class="meta"><div class="title">${it.title}</div><div class="sub">${it.subtitle}</div></div>`;
    card.querySelector('img').onclick=()=>openLightbox(it.image);
    grid.appendChild(card);
  });
  window.scrollTo({top:0,behavior:'smooth'});
}

function openLightbox(src){
  const lb=document.getElementById('lightbox');
  document.getElementById('lbimg').src=src;
  lb.classList.add('show');
}

// Sidebar link handlers
document.querySelectorAll('.cat a').forEach(a=>{
  a.addEventListener('click', (e)=>{
    e.preventDefault();
    showCat(a.dataset.id);
  });
});

// Collapsible logic
const coll = document.getElementById('flowerCollapsible');
const summary = coll.querySelector('.summary');
const content = coll.querySelector('.content');

function toggleFlower(){
  const isOpen = coll.classList.toggle('open');
  summary.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
}
summary.addEventListener('click', toggleFlower);
summary.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' || e.key===' '){
    e.preventDefault();
    toggleFlower();
  }
});

// Default category on load
showCat('carts');
</script>
</body>
</html>
