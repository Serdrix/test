(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{73189:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return s(39797)}])},78293:function(e,a,s){"use strict";var t=s(85893),i=s(67294),n=s(99304),c=s(2261),l=s(32177),r=s(11163),d=s(87066);a.Z=e=>{let{slides:a,swiperId:s,className:o,onAddCart:u}=e,[m,p]=(0,i.useState)([]),h=(0,r.useRouter)(),getProductIds=()=>a.map(e=>e.id),handleGetComments=async()=>{try{let e=getProductIds();if(!e)return;let a=await d.Z.post("/api/comment",{action:"getByProductids",product_ids:e});a.data.isSuccessful&&p(a.data.comments)}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{(null==a?void 0:a.length)&&handleGetComments()},[h]),(0,t.jsxs)("div",{className:o,children:[(0,t.jsx)(c.tq,{modules:[n.W_],id:s,navigation:{nextEl:".custom-next-".concat(o),prevEl:".custom-prev-".concat(o)},slidesPerView:1,spaceBetween:30,className:"newArrival",breakpoints:{320:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3},1024:{slidesPerView:4}},children:a.map((e,a)=>(0,t.jsx)(c.o5,{children:(0,t.jsx)(l.Z,{item:e,comments:null==m?void 0:m.filter(a=>a.product_id===e.id)})},a))}),a.length>4&&(0,t.jsxs)("div",{className:"group-btn",children:[(0,t.jsx)("div",{className:"custom-prev custom-prev-".concat(o),children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custom-next custom-next-".concat(o),children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]})}},39797:function(e,a,s){"use strict";s.r(a),s.d(a,{__N_SSP:function(){return V}});var t=s(85893),i=s(41664),n=s.n(i),c=s(30709),l=s.n(c),r=s(19708),d=s.n(r),o=s(78293),u=s(78611),m=s(87066),p=s(2261),h=s(99304),x=s(67294),v=s(68905),j=s(11187),g=s(64749),_=s(41764),N=s(91633),b=s(11163),f=s(78993),y=s(53992),w=s(27484),D=s.n(w),C=s(29387),I=s.n(C),P=s(70178),S=s.n(P);D().extend(S()),D().extend(I());var V=!0;a.default=e=>{var a;let{heading:s,product:i,related:c,menu:r}=e,w=(0,b.useRouter)(),[C,I]=(0,x.useState)(null),[P,S]=(0,x.useState)(1),{cart:V,addToCart:q}=(0,v.j)(),Z=r.find(e=>e.id==i.category_id),E=f.Z.getFlavors(i),k=f.Z.getAllUnit(i,!1),F=null!=i.unit_note&&""!=i.unit_note?i.unit_note:i.unit,R=null===(a=k[0])||void 0===a?void 0:a.unitValue,[H,M]=(0,x.useState)(F),[T,B]=(0,x.useState)(parseInt(R)),[L,$]=(0,x.useState)(E.length>0?E[0].flavor_value:null);(0,x.useEffect)(()=>{S(1),$(E.length>0?E[0].flavor_value:null),B(R),M(F)},[w.query]);let handleChangeQuantity=e=>{e?S(parseInt(P)+1):!e&&P>1&&S(parseInt(P)-1)},handleChangeUnit=(e,a)=>{let s=e.split("-");M(s[1]),B(parseInt(s[0]))},handleChangeProduct=e=>{if(void 0!==e&&e>0){let a=c.find(a=>a.id==e);w.push("/product/".concat(a.id))}},A=[{isImage:!0,url:i.feature_image}],Q=i.sub_image?JSON.parse(i.sub_image):[];""!=i.video&&A.push({isImage:!1,url:i.video}),Q.forEach(e=>{A.push({isImage:!0,url:e})});let U=f.Z.extractSizeInfo(i.unit),[z,O]=(0,x.useState)(!0),[Y,G]=(0,x.useState)([]),handleGetCommentByProductId=async()=>{try{let e=await m.Z.get("/api/comment?product_id=".concat(i.id));e.data.isSuccessful&&G(e.data.comment)}catch(e){console.log(e)}};return(0,x.useEffect)(()=>{handleGetCommentByProductId()},[i.id]),(0,t.jsx)("div",{className:"page ".concat(s),children:(0,t.jsxs)("div",{className:l().topBanner,children:[(0,t.jsxs)("div",{className:l().wrapperImage,style:{backgroundImage:"url(".concat(""!=i.banner&&null!=i.banner?i.banner:"/asset/categorypage.png",")")},children:[(0,t.jsxs)("ul",{className:"breadcrumb",children:[(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/",children:"Home"})}),Z&&(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"category/".concat(Z.slug,"-").concat(Z.id),children:Z.name})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/product/".concat(i.id),children:i.name})})]}),(0,t.jsxs)("div",{className:l().headingCategory,children:[(0,t.jsx)("span",{children:i.product_name}),(0,t.jsx)("img",{src:"/asset/Lightpng.png",alt:"line",className:l().lineLine})]})]}),(0,t.jsxs)("div",{className:"".concat(d().productRelated," block"),children:[(0,t.jsx)("div",{className:d().cartDetail,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:d().wrapperCartDetail,children:[(0,t.jsxs)("div",{className:d().cartDetailSlide,children:[(0,t.jsxs)("div",{className:"swiper-main",children:[(0,t.jsx)(p.tq,{spaceBetween:10,thumbs:{swiper:C},className:"swiper-main",modules:[h.o3,h.W_],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},simulateTouch:!1,touchMoveStopPropagation:!1,allowTouchMove:!1,children:A.map((e,a)=>(0,t.jsx)(p.o5,{children:e.isImage?(0,t.jsx)(N.Z,{src:e.url}):(0,t.jsx)("video",{controls:!0,autoplay:!0,muted:!0,src:e.url,style:{width:"100%"},children:(0,t.jsx)("source",{src:e.url})})},a))}),A.length>4&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"custon-nav-thumb custom-prev main-prev",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custon-nav-thumb custom-next main-next",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]}),(0,t.jsxs)("div",{className:"slide-thumb ".concat(A.length>4?"bg-thumb":""),children:[(0,t.jsx)(p.tq,{onSwiper:I,direction:"vertical",slidesPerView:4,watchSlidesProgress:!0,slideToClickedSlide:!0,modules:[h.o3,h.W_],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},className:"swiper-thumbs",breakpoints:{320:{spaceBetween:10},768:{spaceBetween:20},1024:{spaceBetween:20}},children:A.map((e,a)=>(0,t.jsx)(p.o5,{children:e.isImage?(0,t.jsx)(N.Z,{src:e.url}):(0,t.jsxs)("video",{controls:!1,muted:!0,autoplay:!0,style:{width:"100%"},children:[(0,t.jsx)("source",{src:e.url}),"Your browser does not support the video tag."]})},a))}),A.length>4&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"custon-nav-thumb custom-prev",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custon-nav-thumb custom-next",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]})]}),(0,t.jsxs)("div",{className:d().cartDetailInfo,children:[(0,t.jsx)(g.default,{className:"custom-select custom-select-product-detail",defaultValue:i.id,value:i.id,onChange:e=>handleChangeProduct(e),options:c.map((e,a)=>({value:e.id,label:e.product_name}))}),(0,t.jsxs)("div",{className:d().Price,children:[i.sale_price>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:d().oldPrice,children:["$",i.price]})," ","-"," "]}),(0,t.jsxs)("span",{className:d().newPrice,children:["$",i.sale_price>0?i.sale_price:i.price," ",i.unit?"per "+i.unit:""," "]})]}),(0,t.jsx)("div",{className:"choice-start",children:(0,t.jsx)("div",{className:"group-select-choice",onMouseOver:()=>{O(!0)},onMouseLeave:()=>{O(!1)},children:(0,t.jsx)(y.Z,{onClose:()=>{O(!1)},isCommentsVisible:z,comments:Y,item_id:i.id})})}),(0,t.jsx)("ul",{className:"".concat(d().Price," product-detail-purchase"),children:f.Z.getAllUnit(i).map((e,a)=>{let s=!0;(void 0===e.note||""==e.note)&&(s=!1);let n=e.sale_price?e.sale_price:e.priceValue,c=e.sale_price?'<span class="old-price">$'.concat(Number(e.priceValue*e.unitValue).toFixed(2),"</span> "):"",l=1==e.unitValue&&null!=i.unit_note&&""!=i.unit_note?"".concat(i.unit_note,"(1 x ").concat(i.unit,")"):i.unit;return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{children:a>0?"".concat(e.note," (").concat(e.unitValue," x ").concat(i.unit,")"):l}),(0,t.jsx)("span",{children:" = "}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:c}}),(0,t.jsxs)("span",{children:["$",Number(n*e.unitValue).toFixed(2)]}),(0,t.jsxs)("span",{className:"unit-price",children:["($",Number(n).toFixed(2)," per ",i.unit,")"]})]}),!s&&(0,t.jsxs)("li",{children:[(0,t.jsxs)("span",{children:[e.unitValue,"x"]}),(0,t.jsx)("span",{children:" = "}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:c}}),(0,t.jsxs)("span",{children:["$",Number(n*e.unitValue).toFixed(2)]}),(0,t.jsxs)("span",{className:"unit-price",children:["($",Number(n).toFixed(2)," per ",i.unit,")"]})]})]})})}),E.length>0&&(0,t.jsxs)("div",{className:"group-columns-price select-flavors",children:[(0,t.jsx)("div",{className:"price-label",children:"Strain List"}),(0,t.jsx)(g.default,{className:"custom-select",defaultValue:E[0].flavor_value,value:L,onChange:$,options:E.map((e,a)=>({value:e.flavor_value,label:"".concat(e.flavor_value," x").concat(e.inventory),disabled:1>parseInt(e.inventory)}))})]}),(0,t.jsxs)("div",{className:d().category,children:["Available :"," ",(0,t.jsxs)("span",{children:[i.quantity," x ",i.unit," ="," ",i.quantity*U.quantity," ",U.unit]})]}),i.quantity<=0&&(0,t.jsx)("div",{className:"out-stock",children:(0,t.jsx)("span",{children:"SOLD OUT"})}),(0,t.jsxs)("div",{className:"wrap-price-product",children:[(0,t.jsxs)("div",{className:"group-price-product",children:[(0,t.jsxs)("div",{className:"group-columns-price",children:[(0,t.jsx)("div",{className:"price-label",children:"Quantity"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsxs)("div",{className:"group-input-cart",children:[(0,t.jsx)("button",{onClick:()=>handleChangeQuantity(!1),children:"-"}),(0,t.jsx)("input",{type:"number",value:P,onKeyDown:e=>{"."===e.key&&e.preventDefault()},onChange:e=>{parseInt(e.target.value),S(e.target.value)},className:"customInputSearch"}),(0,t.jsx)("button",{onClick:()=>handleChangeQuantity(!0),children:"+"})]})})]}),k.length>0&&void 0!==k[0].note&&""!=k[0].note&&(0,t.jsxs)("div",{className:"group-columns-price",children:[(0,t.jsx)("div",{className:"price-label",children:"Unit"}),(0,t.jsx)(g.default,{style:{width:130},defaultValue:"".concat(T,"-").concat(H),value:"".concat(T,"-").concat(H),onChange:(e,a)=>handleChangeUnit(e,a),options:k.map((e,a)=>({value:"".concat(e.unitValue,"-").concat(e.note),label:"".concat(e.note)}))})]}),(0,t.jsxs)("div",{className:"group-columns-price total-quantity",children:[(0,t.jsx)("div",{className:"price-label",children:"Total Quanitty"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsx)("span",{children:T*P})})]}),(0,t.jsxs)("div",{className:"group-columns-price total-quantity",children:[(0,t.jsx)("div",{className:"price-label",children:"Price"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsxs)("span",{children:[" ","$",P>0?f.Z.finalItemPrice({...i,quantity_cart:P,size:T,unit_cart:H}):0]})})]})]}),(0,t.jsx)("div",{className:"group-total-price",children:(0,t.jsxs)("div",{className:"total-price",children:[(0,t.jsx)("div",{className:"total-price-label",children:"Total"}),(0,t.jsxs)("div",{className:"total-price-value",children:["$",Number(P*f.Z.finalItemPrice({...i,quantity_cart:P,size:T,unit_cart:H})).toFixed(2)]})]})})]}),(0,t.jsxs)("div",{className:d().category,children:["Category : ",(0,t.jsx)("span",{children:i.category_name})]}),(0,t.jsx)("div",{className:d().category,children:i.category_mix_name?(0,t.jsxs)("span",{children:["Mix Category : ",i.category_mix_name]}):""}),(0,t.jsx)("button",{className:"btn btn-secondary add-tocart",onClick:()=>{let e=V.filter(e=>e.id==i.id),a=e.reduce((e,a)=>e+a.quantity_cart*a.size,0),s=V.filter(e=>e.id==i.id&&e.flavor==L),t=s.reduce((e,a)=>e+a.quantity_cart*a.size,0);P>=1&&i.quantity>=P*T+a&&f.Z.isFlavorInventoryAvailable({...i,flavor:L},P*T+t)?q({...i,quantity_cart:P,size:T,unit_cart:H,flavor:L}):P<1?j.ZP.error("Quantity value is invalid!!!",3):j.ZP.error("Exceed available stock!!!",3)},children:"Add to cart"})]})]}),""!==i.description&&(0,t.jsxs)("div",{className:d().info,children:[(0,t.jsx)("h2",{className:d().DetailHeading,children:"Description"}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:i.description},className:"detail-product"})]}),Y.length>0&&(0,t.jsxs)("div",{className:"comment",id:"comment",children:[(0,t.jsx)("h2",{className:"comment-title",children:"Comment"}),(0,t.jsx)("div",{className:"comment-wraper",children:null==Y?void 0:Y.map((e,a)=>(0,t.jsxs)("div",{className:"comment-item",children:[(0,t.jsxs)("div",{className:"comment-avatar",children:[(0,t.jsx)("img",{src:"/asset/avatar.png",alt:"avatar",className:"img-res"}),(0,t.jsx)("div",{className:"comment-name",children:(e=>{if(!e)return"***";let[a,s]=e.split("@");if(!a||!s)return"***";let t=a.length>4?a.slice(0,4)+"***":a[0]+"***";return"".concat(t,"@").concat(s)})(e.user.email)})]}),(0,t.jsxs)("div",{className:"comment-content",children:[(0,t.jsx)("div",{className:"comment-start",children:(0,t.jsx)(_.Z,{disabled:!0,value:e.rating,className:"custom-rate"})}),(0,t.jsxs)("div",{className:"comment-date",children:["Reviewed on :"," ",D()(e.created_at).format("YYYY MMM DD (HH:mm)")]}),(0,t.jsx)("div",{className:"comment-text",children:e.description})]})]},a))})]})]})}),(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"group-slide product-related-items",children:[(0,t.jsx)("div",{className:l().title,children:"Related Items"}),(0,t.jsx)(o.Z,{slides:c.slice(0,10),swiperId:d().swiperRelated,className:d().swiperRelated,onAddCart:e=>{q(e)}})]})})]}),(0,t.jsx)(u.Z,{})]})})}},19708:function(e){e.exports={productRelated:"productDetail_productRelated__D2xJb",swiperRelated:"productDetail_swiperRelated__qUndh",cartDetail:"productDetail_cartDetail__Cl9QH",cartDetailInfo:"productDetail_cartDetailInfo__4Rv1x",headingProduct:"productDetail_headingProduct__3vDeo",Price:"productDetail_Price__rvXC1",oldPrice:"productDetail_oldPrice__j1VCq",category:"productDetail_category__uvhIt",cartDetailSlide:"productDetail_cartDetailSlide__QR0jI",wrapperCartDetail:"productDetail_wrapperCartDetail__yFjw9",groupInput:"productDetail_groupInput__LqPbv",info:"productDetail_info___eaAu",DetailHeading:"productDetail_DetailHeading__H0jcV"}}},function(e){e.O(0,[165,633,884,774,888,179],function(){return e(e.s=73189)}),_N_E=e.O()}]);