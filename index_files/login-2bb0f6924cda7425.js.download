(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{64167:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return i(66049)}])},66049:function(e,s,i){"use strict";i.r(s),i.d(s,{__N_SSP:function(){return v}});var a=i(85893),l=i(67294),n=i(97538),r=i(51024),o=i(11187),d=i(11163),u=i(41664),c=i.n(u),t=i(87066),m=i(76324),v=!0;s.default=()=>{let{setUser:e}=(0,m.aF)(),[s,i]=(0,l.useState)(!1),u=(0,d.useRouter)(),{backUrl:v}=u.query,onFinish=async s=>{let i={username:s.email,password:s.password,action:"login"};try{let s=await t.Z.post("/api/login",{...i});e(s.data.user),s.data.user.enabled_2fa?u.push("/2fa/verify?redirect="+(v||"/")):u.push(v||"/")}catch(e){var a,l,n,r,d,c,m,h;console.log(e),o.ZP.error((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.error)||"login failed"),void 0!==(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.isVerify)&&(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.isVerify)===!1&&u.push("/unverified-account?user_id=".concat(null==e?void 0:null===(h=e.response)||void 0===h?void 0:null===(m=h.data)||void 0===m?void 0:m.user_id))}};return(0,a.jsx)("div",{className:"login",children:(0,a.jsx)("div",{className:"wrapper-form",children:(0,a.jsxs)("div",{className:"form-global",children:[(0,a.jsx)("div",{className:"heading-form",children:"Login"}),(0,a.jsx)("div",{className:"body-form",children:(0,a.jsxs)(n.Z,{name:"login",onFinish:onFinish,initialValues:{remember:!0},layout:"vertical",className:"form-custom",children:[(0,a.jsxs)("div",{className:"custom-input",children:[(0,a.jsx)("label",{className:"custom-label",children:"Email"}),(0,a.jsx)(n.Z.Item,{name:"email",rules:[{required:!0,type:"email",message:"Please input your email!"}],normalize:e=>e.trim(),children:(0,a.jsx)(r.default,{placeholder:"Enter your email"})})]}),(0,a.jsxs)("div",{className:"custom-input",children:[(0,a.jsx)("label",{className:"custom-label",children:"Password"}),(0,a.jsx)(n.Z.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:(0,a.jsx)(r.default.Password,{placeholder:"Enter your password"})})]}),(0,a.jsx)("div",{className:"forgot-pass",children:(0,a.jsx)(c(),{href:"/forgot-password",className:"form-link",children:"Forgot password"})}),(0,a.jsx)("div",{className:"btn-form",children:(0,a.jsx)("button",{type:"submit",disabled:s,children:"Login"})}),(0,a.jsxs)("div",{className:"have-account",children:["Donâ€™t have an account?"," ",(0,a.jsx)(c(),{href:"/sign-up",className:"form-link",children:"Sign up"})]})]})})]})})})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=64167)}),_N_E=e.O()}]);