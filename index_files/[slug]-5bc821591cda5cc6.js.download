(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2915],{73189:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return a(28067)}])},28067:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSP:function(){return V},default:function(){return _slug_}});var t=a(85893),n=a(41664),i=a.n(n),c=a(30709),l=a.n(c),r=a(19708),d=a.n(r),o=a(67294),u=a(99304),m=a(2261),p=a(32177),h=a(11163),x=a(87066),components_CustomSwiper=e=>{let{slides:s,swiperId:a,className:n,onAddCart:i}=e,[c,l]=(0,o.useState)([]),r=(0,h.useRouter)(),getProductIds=()=>s.map(e=>e.id),handleGetComments=async()=>{try{let e=getProductIds();if(!e)return;let s=await x.Z.post("/api/comment",{action:"getByProductids",product_ids:e});s.data.isSuccessful&&l(s.data.comments)}catch(e){console.log(e)}};return(0,o.useEffect)(()=>{(null==s?void 0:s.length)&&handleGetComments()},[r]),(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)(m.tq,{modules:[u.W_],id:a,navigation:{nextEl:".custom-next-".concat(n),prevEl:".custom-prev-".concat(n)},slidesPerView:1,spaceBetween:30,className:"newArrival",breakpoints:{320:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3},1024:{slidesPerView:4}},children:s.map((e,s)=>(0,t.jsx)(m.o5,{children:(0,t.jsx)(p.Z,{item:e,comments:null==c?void 0:c.filter(s=>s.product_id===e.id)})},s))}),s.length>4&&(0,t.jsxs)("div",{className:"group-btn",children:[(0,t.jsx)("div",{className:"custom-prev custom-prev-".concat(n),children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custom-next custom-next-".concat(n),children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]})},v=a(78611),j=a(68905),g=a(11187),_=a(64749),N=a(41764),b=a(91633),f=a(78993),y=a(53992),w=a(27484),C=a.n(w),D=a(29387),I=a.n(D),P=a(70178),S=a.n(P);C().extend(S()),C().extend(I());var V=!0,_slug_=e=>{var s;let{heading:a,product:n,related:c,menu:r}=e,p=(0,h.useRouter)(),[w,D]=(0,o.useState)(null),[I,P]=(0,o.useState)(1),{cart:S,addToCart:V}=(0,j.j)(),q=r.find(e=>e.id==n.category_id),Z=f.Z.getFlavors(n),E=f.Z.getAllUnit(n,!1),k=null!=n.unit_note&&""!=n.unit_note?n.unit_note:n.unit,F=null===(s=E[0])||void 0===s?void 0:s.unitValue,[R,H]=(0,o.useState)(k),[M,T]=(0,o.useState)(parseInt(F)),[B,L]=(0,o.useState)(Z.length>0?Z[0].flavor_value:null);(0,o.useEffect)(()=>{P(1),L(Z.length>0?Z[0].flavor_value:null),T(F),H(k)},[p.query]);let handleChangeQuantity=e=>{e?P(parseInt(I)+1):!e&&I>1&&P(parseInt(I)-1)},handleChangeUnit=(e,s)=>{let a=e.split("-");H(a[1]),T(parseInt(a[0]))},handleChangeProduct=e=>{if(void 0!==e&&e>0){let s=c.find(s=>s.id==e);p.push("/product/".concat(s.id))}},$=[{isImage:!0,url:n.feature_image}],A=n.sub_image?JSON.parse(n.sub_image):[];""!=n.video&&$.push({isImage:!1,url:n.video}),A.forEach(e=>{$.push({isImage:!0,url:e})});let Q=f.Z.extractSizeInfo(n.unit),[U,z]=(0,o.useState)(!0),[O,Y]=(0,o.useState)([]),handleGetCommentByProductId=async()=>{try{let e=await x.Z.get("/api/comment?product_id=".concat(n.id));e.data.isSuccessful&&Y(e.data.comment)}catch(e){console.log(e)}};return(0,o.useEffect)(()=>{handleGetCommentByProductId()},[n.id]),(0,t.jsx)("div",{className:"page ".concat(a),children:(0,t.jsxs)("div",{className:l().topBanner,children:[(0,t.jsxs)("div",{className:l().wrapperImage,style:{backgroundImage:"url(".concat(""!=n.banner&&null!=n.banner?n.banner:"/asset/categorypage.png",")")},children:[(0,t.jsxs)("ul",{className:"breadcrumb",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/",children:"Home"})}),q&&(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"category/".concat(q.slug,"-").concat(q.id),children:q.name})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/product/".concat(n.id),children:n.name})})]}),(0,t.jsxs)("div",{className:l().headingCategory,children:[(0,t.jsx)("span",{children:n.product_name}),(0,t.jsx)("img",{src:"/asset/Lightpng.png",alt:"line",className:l().lineLine})]})]}),(0,t.jsxs)("div",{className:"".concat(d().productRelated," block"),children:[(0,t.jsx)("div",{className:d().cartDetail,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:d().wrapperCartDetail,children:[(0,t.jsxs)("div",{className:d().cartDetailSlide,children:[(0,t.jsxs)("div",{className:"swiper-main",children:[(0,t.jsx)(m.tq,{spaceBetween:10,thumbs:{swiper:w},className:"swiper-main",modules:[u.o3,u.W_],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},simulateTouch:!1,touchMoveStopPropagation:!1,allowTouchMove:!1,children:$.map((e,s)=>(0,t.jsx)(m.o5,{children:e.isImage?(0,t.jsx)(b.Z,{src:e.url}):(0,t.jsx)("video",{controls:!0,autoplay:!0,muted:!0,src:e.url,style:{width:"100%"},children:(0,t.jsx)("source",{src:e.url})})},s))}),$.length>4&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"custon-nav-thumb custom-prev main-prev",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custon-nav-thumb custom-next main-next",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]}),(0,t.jsxs)("div",{className:"slide-thumb ".concat($.length>4?"bg-thumb":""),children:[(0,t.jsx)(m.tq,{onSwiper:D,direction:"vertical",slidesPerView:4,watchSlidesProgress:!0,slideToClickedSlide:!0,modules:[u.o3,u.W_],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},className:"swiper-thumbs",breakpoints:{320:{spaceBetween:10},768:{spaceBetween:20},1024:{spaceBetween:20}},children:$.map((e,s)=>(0,t.jsx)(m.o5,{children:e.isImage?(0,t.jsx)(b.Z,{src:e.url}):(0,t.jsxs)("video",{controls:!1,muted:!0,autoplay:!0,style:{width:"100%"},children:[(0,t.jsx)("source",{src:e.url}),"Your browser does not support the video tag."]})},s))}),$.length>4&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"custon-nav-thumb custom-prev",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"prev"})}),(0,t.jsx)("div",{className:"custon-nav-thumb custom-next",children:(0,t.jsx)("img",{src:"/asset/btn-next.svg",alt:"next"})})]})]})]}),(0,t.jsxs)("div",{className:d().cartDetailInfo,children:[(0,t.jsx)(_.default,{className:"custom-select custom-select-product-detail",defaultValue:n.id,value:n.id,onChange:e=>handleChangeProduct(e),options:c.map((e,s)=>({value:e.id,label:e.product_name}))}),(0,t.jsxs)("div",{className:d().Price,children:[n.sale_price>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:d().oldPrice,children:["$",n.price]})," -"," "]}),(0,t.jsxs)("span",{className:d().newPrice,children:["$",n.sale_price>0?n.sale_price:n.price," ",n.unit?"per "+n.unit:""," "]})]}),(0,t.jsx)("div",{className:"choice-start",children:(0,t.jsx)("div",{className:"group-select-choice",onMouseOver:()=>{z(!0)},onMouseLeave:()=>{z(!1)},children:(0,t.jsx)(y.Z,{onClose:()=>{z(!1)},isCommentsVisible:U,comments:O,item_id:n.id})})}),(0,t.jsx)("ul",{className:"".concat(d().Price," product-detail-purchase"),children:f.Z.getAllUnit(n).map((e,s)=>{let a=!0;(void 0===e.note||""==e.note)&&(a=!1);let i=e.sale_price?e.sale_price:e.priceValue,c=e.sale_price?'<span class="old-price">$'.concat(Number(e.priceValue*e.unitValue).toFixed(2),"</span> "):"",l=1==e.unitValue&&null!=n.unit_note&&""!=n.unit_note?"".concat(n.unit_note,"(1 x ").concat(n.unit,")"):n.unit;return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{children:s>0?"".concat(e.note," (").concat(e.unitValue," x ").concat(n.unit,")"):l}),(0,t.jsx)("span",{children:" = "}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:c}}),(0,t.jsxs)("span",{children:["$",Number(i*e.unitValue).toFixed(2)]}),(0,t.jsxs)("span",{className:"unit-price",children:["($",Number(i).toFixed(2)," per ",n.unit,")"]})]}),!a&&(0,t.jsxs)("li",{children:[(0,t.jsxs)("span",{children:[e.unitValue,"x"]}),(0,t.jsx)("span",{children:" = "}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:c}}),(0,t.jsxs)("span",{children:["$",Number(i*e.unitValue).toFixed(2)]}),(0,t.jsxs)("span",{className:"unit-price",children:["($",Number(i).toFixed(2)," per ",n.unit,")"]})]})]})})}),Z.length>0&&(0,t.jsxs)("div",{className:"group-columns-price select-flavors",children:[(0,t.jsx)("div",{className:"price-label",children:"Strain List"}),(0,t.jsx)(_.default,{className:"custom-select",defaultValue:Z[0].flavor_value,value:B,onChange:L,options:Z.map((e,s)=>({value:e.flavor_value,label:"".concat(e.flavor_value," x").concat(e.inventory),disabled:1>parseInt(e.inventory)}))})]}),(0,t.jsxs)("div",{className:d().category,children:["Available :"," ",(0,t.jsxs)("span",{children:[n.quantity," x ",n.unit," = ",n.quantity*Q.quantity," ",Q.unit]})]}),n.quantity<=0&&(0,t.jsx)("div",{className:"out-stock",children:(0,t.jsx)("span",{children:"SOLD OUT"})}),(0,t.jsxs)("div",{className:"wrap-price-product",children:[(0,t.jsxs)("div",{className:"group-price-product",children:[(0,t.jsxs)("div",{className:"group-columns-price",children:[(0,t.jsx)("div",{className:"price-label",children:"Quantity"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsxs)("div",{className:"group-input-cart",children:[(0,t.jsx)("button",{onClick:()=>handleChangeQuantity(!1),children:"-"}),(0,t.jsx)("input",{type:"number",value:I,onKeyDown:e=>{"."===e.key&&e.preventDefault()},onChange:e=>{parseInt(e.target.value),P(e.target.value)},className:"customInputSearch"}),(0,t.jsx)("button",{onClick:()=>handleChangeQuantity(!0),children:"+"})]})})]}),E.length>0&&void 0!==E[0].note&&""!=E[0].note&&(0,t.jsxs)("div",{className:"group-columns-price",children:[(0,t.jsx)("div",{className:"price-label",children:"Unit"}),(0,t.jsx)(_.default,{style:{width:130},defaultValue:"".concat(M,"-").concat(R),value:"".concat(M,"-").concat(R),onChange:(e,s)=>handleChangeUnit(e,s),options:E.map((e,s)=>({value:"".concat(e.unitValue,"-").concat(e.note),label:"".concat(e.note)}))})]}),(0,t.jsxs)("div",{className:"group-columns-price total-quantity",children:[(0,t.jsx)("div",{className:"price-label",children:"Total Quanitty"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsx)("span",{children:M*I})})]}),(0,t.jsxs)("div",{className:"group-columns-price total-quantity",children:[(0,t.jsx)("div",{className:"price-label",children:"Price"}),(0,t.jsx)("div",{className:"price-value",children:(0,t.jsxs)("span",{children:[" ","$",I>0?f.Z.finalItemPrice({...n,quantity_cart:I,size:M,unit_cart:R}):0]})})]})]}),(0,t.jsx)("div",{className:"group-total-price",children:(0,t.jsxs)("div",{className:"total-price",children:[(0,t.jsx)("div",{className:"total-price-label",children:"Total"}),(0,t.jsxs)("div",{className:"total-price-value",children:["$",Number(I*f.Z.finalItemPrice({...n,quantity_cart:I,size:M,unit_cart:R})).toFixed(2)]})]})})]}),(0,t.jsxs)("div",{className:d().category,children:["Category : ",(0,t.jsx)("span",{children:n.category_name})]}),(0,t.jsx)("div",{className:d().category,children:n.category_mix_name?(0,t.jsxs)("span",{children:["Mix Category : ",n.category_mix_name]}):""}),(0,t.jsx)("button",{className:"btn btn-secondary add-tocart",onClick:()=>{let e=S.filter(e=>e.id==n.id),s=e.reduce((e,s)=>e+s.quantity_cart*s.size,0),a=S.filter(e=>e.id==n.id&&e.flavor==B),t=a.reduce((e,s)=>e+s.quantity_cart*s.size,0);I>=1&&n.quantity>=I*M+s&&f.Z.isFlavorInventoryAvailable({...n,flavor:B},I*M+t)?V({...n,quantity_cart:I,size:M,unit_cart:R,flavor:B}):I<1?g.ZP.error("Quantity value is invalid!!!",3):g.ZP.error("Exceed available stock!!!",3)},children:"Add to cart"})]})]}),""!==n.description&&(0,t.jsxs)("div",{className:d().info,children:[(0,t.jsx)("h2",{className:d().DetailHeading,children:"Description"}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:n.description},className:"detail-product"})]}),O.length>0&&(0,t.jsxs)("div",{className:"comment",id:"comment",children:[(0,t.jsx)("h2",{className:"comment-title",children:"Comment"}),(0,t.jsx)("div",{className:"comment-wraper",children:null==O?void 0:O.map((e,s)=>(0,t.jsxs)("div",{className:"comment-item",children:[(0,t.jsxs)("div",{className:"comment-avatar",children:[(0,t.jsx)("img",{src:"/asset/avatar.png",alt:"avatar",className:"img-res"}),(0,t.jsx)("div",{className:"comment-name",children:(e=>{if(!e)return"***";let[s,a]=e.split("@");if(!s||!a)return"***";let t=s.length>4?s.slice(0,4)+"***":s[0]+"***";return"".concat(t,"@").concat(a)})(e.user.email)})]}),(0,t.jsxs)("div",{className:"comment-content",children:[(0,t.jsx)("div",{className:"comment-start",children:(0,t.jsx)(N.Z,{disabled:!0,value:e.rating,className:"custom-rate"})}),(0,t.jsxs)("div",{className:"comment-date",children:["Reviewed on : ",C()(e.created_at).format("YYYY MMM DD (HH:mm)")]}),(0,t.jsx)("div",{className:"comment-text",children:e.description})]})]},s))})]})]})}),(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"group-slide product-related-items",children:[(0,t.jsx)("div",{className:l().title,children:"Related Items"}),(0,t.jsx)(components_CustomSwiper,{slides:c.slice(0,10),swiperId:d().swiperRelated,className:d().swiperRelated,onAddCart:e=>{V(e)}})]})})]}),(0,t.jsx)(v.Z,{})]})})}},19708:function(e){e.exports={productRelated:"productDetail_productRelated__D2xJb",swiperRelated:"productDetail_swiperRelated__qUndh",cartDetail:"productDetail_cartDetail__Cl9QH",cartDetailInfo:"productDetail_cartDetailInfo__4Rv1x",headingProduct:"productDetail_headingProduct__3vDeo",Price:"productDetail_Price__rvXC1",oldPrice:"productDetail_oldPrice__j1VCq",category:"productDetail_category__uvhIt",cartDetailSlide:"productDetail_cartDetailSlide__QR0jI",wrapperCartDetail:"productDetail_wrapperCartDetail__yFjw9",groupInput:"productDetail_groupInput__LqPbv",info:"productDetail_info___eaAu",DetailHeading:"productDetail_DetailHeading__H0jcV"}}},function(e){e.O(0,[5165,1633,884,9774,2888,179],function(){return e(e.s=73189)}),_N_E=e.O()}]);