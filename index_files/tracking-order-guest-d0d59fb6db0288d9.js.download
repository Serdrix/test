(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5804],{7737:function(e,t,r){"use strict";var a=r(64836),s=r(18698);t.Z=void 0;var n=a(r(42122)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var d=n?Object.getOwnPropertyDescriptor(e,i):null;d&&(d.get||d.set)?Object.defineProperty(a,i,d):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(67294)),d=a(r(66598)),c=a(r(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}var o=i.forwardRef(function(e,t){return i.createElement(c.default,(0,n.default)((0,n.default)({},e),{},{ref:t,icon:d.default}))});t.Z=o},7755:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tracking-order-guest",function(){return r(37265)}])},37265:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return O}});var a=r(85893),s=r(67294),n=r(51024),i=r(65400),d=r.n(i),c=r(36671),o=r(53740),l=r(56590),u=r(84960),h=r(59361),f=r(7737),p=r(11163),g=r(49178),v=r(91762);let{Title:m,Text:E}=o.default;var O=!0;t.default=()=>{let e=(0,p.useRouter)(),[t,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(""),[m,E]=(0,s.useState)(!0);(0,s.useEffect)(()=>{getRecentOrder()},[]);let getRecentOrder=()=>{let e=localStorage.getItem("guestOrders");if(e){let t=JSON.parse(e);t&&t.length>0&&fetchOrderDetail(t.join(",")+",")}},O=(0,v.ND)({onSuccess:async e=>{if(e&&e.data){var t;(null===(t=e.data)||void 0===t?void 0:t.length)>0?(console.log("data",[e.data]),r(e.data)):(console.log("data",[e.data]),r([e.data]))}else r([]);E(!1)},onError:e=>{console.error("Error fetching order data:",e),E(!1)}}),handleViewTracking=t=>{e.push("/tracking-order?referenceId=".concat(t.referenceId))},fetchOrderDetail=async e=>{try{O.mutate({orderId:e})}catch(e){console.error("Error fetching order status:",e)}},handleSearch=()=>{i?fetchOrderDetail(i):getRecentOrder()},getOrderStatusColor=e=>{switch(e){case g.q1.PENDING:return"teal";case g.q1.PROCESSING:return"orange";case g.q1.SHIPPED:return"green";case g.q1.COMPLETED:return"blue";case g.q1.CANCELLED:return"purple";case g.q1.INCOMPLETE:return"red";default:return""}},renderStatus=e=>{switch(e){case g.q1.PENDING:return"Order Placed";case g.q1.PROCESSING:return"Processing";case g.q1.SHIPPED:return"Shipped";case g.q1.COMPLETED:return"Delivered";case g.q1.INCOMPLETE:return"Faied Payment";default:return""}};return(0,a.jsxs)("div",{className:"page payment-order-guest",children:[(0,a.jsx)("h2",{className:"title-order-guest",children:" Order Tracking"}),(0,a.jsxs)("div",{className:"form-custom",style:{display:"flex",marginBottom:"24px",gap:"8px"},children:[(0,a.jsx)(n.default,{placeholder:"Enter Order ID",value:i,onChange:e=>o(e.target.value),onPressEnter:handleSearch,style:{flex:1}}),(0,a.jsx)(d(),{type:"primary",icon:(0,a.jsx)(f.Z,{}),onClick:handleSearch,children:"Track Order"})]}),(0,a.jsx)("div",{children:0===t.length?(0,a.jsx)(c.default,{description:"No recent orders found"}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map((e,t)=>(0,a.jsx)(l.Z,{header:(0,a.jsxs)("div",{className:"group-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("b",{children:["Order Id: ",e.referenceId]}),(0,a.jsx)("div",{className:"view-tracking",style:{cursor:"pointer",color:"#1890ff"},onClick:()=>handleViewTracking(e),children:"View Tracking"})]}),bordered:!0,dataSource:e.lineItems,renderItem:(t,r)=>(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(l.Z.Item.Meta,{avatar:(0,a.jsx)(u.ZP,{size:64,src:t.feature_image}),title:t.product_name,description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:["Price: $",t.unitPrice," x ",t.quantity]}),(0,a.jsxs)("div",{children:["Status: ",(0,a.jsx)(h.Z,{color:getOrderStatusColor(e.status),children:renderStatus(e.status)})]}),(0,a.jsxs)("div",{children:["Date Created:"," ",new Date(e.date_created).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})]})]})})})},e.referenceId))})})]})}},91762:function(e,t,r){"use strict";r.d(t,{ND:function(){return useGetOrderDetailByID}});var a=r(88767),s=r(41106),n=r.n(s),i=r(34196),d=r(47922);let useGetOrderDetailByID=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)(e=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n()(i.Z.ORDER_GET_DETAIL_BYID);return new d.Z({endpoint:t({id:e.orderId})}).get({})})(e),e)}},47922:function(e,t,r){"use strict";r.d(t,{Z:function(){return middlewareService}});var a=r(87066),s=r(54887),n=r(49178);let apiService=class apiService{getRequestParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.Z.stringify(e)}getRequestHeaders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach(r=>{t[r.toLowerCase()]=e[r]}),t}getPathWithParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach(r=>{let a="/:".concat(r);e=e.replace(a,"/".concat(t[r]))}),e}request(e,t){if(this.data){if(t instanceof FormData){var r;t.append("BrotherApiKey",null===(r=this.data)||void 0===r?void 0:r.BrotherApiKey)}else t={...t,...this.data}}return new Promise(async(r,a)=>{let s={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":!0,"Content-Type":this.headers["Content-Type"]?this.headers["Content-Type"]:"application/json",...this.headers},i=t,d={};e===n.Is.GET?i={headers:s,params:t}:e===n.Is.DELETE?i={headers:s,data:t}:d={headers:s},this.axios[e](this.endpoint,i,d).then(e=>{let t=this.parser?this.parser(e.data):e.data;return r(t)}).catch(e=>a(e))})}constructor(e={}){this.get=e=>this.request(n.Is.GET,e),this.post=e=>this.request(n.Is.POST,e),this.put=e=>this.request(n.Is.PUT,e),this.delete=e=>this.request(n.Is.DELETE,e),this.baseURL=e.baseURL,this.parser=e.parser,this.timeout=e.timeout,this.headers=this.getRequestHeaders(e.headers||{}),this.endpoint=this.getPathWithParams(e.endpoint||void 0,this.endpointParams),this.data=(null==e?void 0:e.data)||{},this.axios=a.Z.create({baseURL:"".concat(this.baseURL),timeout:this.timeout,...e.axiosConfig}),this.axios.interceptors.request.use(e=>e,e=>Promise.reject(e))}};let middlewareService=class middlewareService extends apiService{constructor(e={}){let t=Object.assign(e,{baseURL:"/"});super(t)}}}},function(e){e.O(0,[3740,9704,9774,2888,179],function(){return e(e.s=7755)}),_N_E=e.O()}]);